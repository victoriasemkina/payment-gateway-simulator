# Payment Gateway Simulator

[![Python](https://img.shields.io/badge/Python-3.10%2B-blue)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115%2B-black)](https://fastapi.tiangolo.com/)
[![License](https://img.shields.io/badge/License-MIT-green)](LICENSE)

**–ú–æ–∫–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂–Ω—ã–π —à–ª—é–∑**, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ **Ports & Adapters (Hexagonal)**, —á—Ç–æ–±—ã –ø–æ–∫–∞–∑–∞—Ç—å:
- ‚úÖ –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ –õ—ë–≥–∫—É—é –∑–∞–º–µ–Ω—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π (–º–æ–∫–∏ Stripe, PayPal)
- ‚úÖ –£–¥–æ–±—Å—Ç–≤–æ –¥–ª—è QA: –∏–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
- ‚úÖ –°–∏–º—É–ª—è—Ü–∏—é –æ—à–∏–±–æ–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

## üéØ –ó–∞—á–µ–º —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç?

–ö–∞–∫ QA-–∏–Ω–∂–µ–Ω–µ—Ä, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å Java/Spring Boot, —è —Ö–æ—Ç–µ–ª–∞:
1. –ò–∑—É—á–∏—Ç—å Python —á–µ—Ä–µ–∑ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
2. –ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ø—Ä–∏–Ω—Ü–∏–ø—ã **Ports & Adapters** –Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —è–∑—ã–∫–∞
3. –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∏–º–∏—Ç–∏—Ä—É—é—â–∏–π —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —à–ª—é–∑–æ–≤
4. –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–ª—è—Ü–∏—é —Ç–µ—Å—Ç–æ–≤ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## üß™ –°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –¢–∏–ø —Ç–µ—Å—Ç–æ–≤       | –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ          | –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç                          |
|------------------|-----------------------|---------------------------------------|
| **–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã**   | `tests/unit/`         | –¢–µ—Å—Ç–∏—Ä—É—é—Ç use cases —Å –º–æ–∫–∞–º–∏ –ø–æ—Ä—Ç–æ–≤   |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ**| `tests/integration/`  | –í—ã–∑—ã–≤–∞—é—Ç API —á–µ—Ä–µ–∑ HTTP (–∫–∞–∫ –∫–ª–∏–µ–Ω—Ç)  |
| **–°–∏–º—É–ª—è—Ü–∏—è –æ—à–∏–±–æ–∫**| –ß–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä `fail_rate` | –ò–º–∏—Ç–∞—Ü–∏—è –æ—Ç–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π      |

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/victoriasemkina/payment-gateway-simulator.git
cd payment-gateway-simulator
```
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python 3.10+ –∏ Poetry (—Å–º. –Ω–∏–∂–µ)
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
poetry install
```
4. –ó–∞–ø—É—Å–∫–∞–µ–º API-—Å–µ—Ä–≤–µ—Ä
```bash
uvicorn src.payment_gateway_simulator.api.main:app --reload --port 8000
```

‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- http://127.0.0.1:8000/health
- http://127.0.0.1:8000/docs (Swagger UI)

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
- –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–±—ã—Å—Ç—Ä—ã–µ, –±–µ–∑ —Å–µ—Ç–∏)
```powershell
pytest tests/unit/ -v
```
‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 36 –∑–µ–ª—ë–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (—á–µ—Ä–µ–∑ HTTP)
1. –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):
```powershell
uvicorn src.payment_gateway_simulator.api.main:app --port 8000
```
2. –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã (–≤–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):
```powershell
pytest tests/integration/ -v
```
‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 6 –∑–µ–ª—ë–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

## ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –Ω–∞ Windows
### –ü—Ä–æ–±–ª–µ–º–∞: –¢–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Å–µ—Ä–≤–µ—Ä–∞ (httpx.ReadTimeout)
–°–∏–º–ø—Ç–æ–º—ã:
```text
httpx.ReadTimeout: timed out
FAILED tests/integration/test_api.py::TestPaymentApi::test_health_check - Failed: ...
```
–ü—Ä–∏—á–∏–Ω–∞:
–ü–æ—Ä—Ç 8000 –∑–∞–Ω—è—Ç "–∑–æ–º–±–∏"-–ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤ —Å --reload.

–†–µ—à–µ–Ω–∏–µ:
1. –ù–∞–π–¥–∏ –ø—Ä–æ—Ü–µ—Å—Å—ã, –∑–∞–Ω–∏–º–∞—é—â–∏–µ –ø–æ—Ä—Ç 8000:
```
netstat -ano | findstr :8000
```
2. –£–±–µ–π –∑–∞–≤–∏—Å—à–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (–∑–∞–º–µ–Ω—è–π PID –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ):
```commandline
taskkill /PID 11216 /F
```
3. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç ‚Äî —É–±–µ–π –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python:
```commandline
taskkill /IM python.exe /F
```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä –ë–ï–ó `--reload`:
```commandline
uvicorn src.payment_gateway_simulator.api.main:app --port 8000
```

### –ü—Ä–æ–±–ª–µ–º–∞: localhost –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
–†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–π `127.0.0.1` –≤–º–µ—Å—Ç–æ `localhost` –≤–µ–∑–¥–µ (–≤ –∫–æ–¥–µ –∏ –±—Ä–∞—É–∑–µ—Ä–µ).